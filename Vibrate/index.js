(function(y,$){"use strict";function O(e){var r=Object.create(null);return e&&Object.keys(e).forEach(function(i){if(i!=="default"){var t=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(r,i,t.get?t:{enumerable:!0,get:function(){return e[i]}})}}),r.default=e,Object.freeze(r)}var f=O($);function b(e,r,i){if(!e.name||!e?.description)throw new Error(`No name(${e?.name}) or description(${e?.description}) in the passed command (command name: ${e?.name})`);if(e.displayName=r?.names?.[i]??e.name,e.displayDescription=r?.names?.[i]??e.description,e.options){if(!Array.isArray(e.options))throw new Error(`Options is not an array (received: ${typeof e.options})`);e.options=e.options.map(function(t,s){if(!t?.name||!t?.description)throw new Error(`No name(${t?.name}) or description(${t?.description} in the option with index ${s}`);return t.displayName=r?.options?.[s]?.names?.[i]??t.name,t.displayDescription=r?.options?.[s]?.descriptions?.[i]??t.description,t})}return e}const g={loadingDiscordSpinner:"a:loading:1105495814073229393",aol:"a:aol:1108834296359301161",linuth:":linuth:1110531631409811547",fuckyoy:":fuckyoy:1108360628302782564",getLoading(){return Math.random()<.01?this?.aol:this.loadingDiscordSpinner},getFailure(){return Math.random()<.01?this?.fuckyoy:this.linuth},getSuccess(){return""}},I={command:"https://cdn.discordapp.com/attachments/1099116247364407337/1112129955053187203/command.png"},{metro:u,logger:R,commands:_}=f,{common:{ReactNative:M}}=u,{triggerHaptic:P}=u.findByProps("triggerHaptic"),U=function(e){return M.Platform.select(typeof e=="object"&&(e.hasOwnProperty("ios")||e.hasOwnProperty("android"))?e:{ios:[e],android:e})},v=function(e){return new Promise(function(r){return setTimeout(r,e)})};let A=0;const l=[];async function B(e,r,i){try{typeof e>"u"&&(e={}),e.repeat||(e.repeat=1);const t={id:A++,stopping:!1,stopped:!1,ios:U({ios:!0,android:!1})};l.push(t),console.log(t),t.startO=await r(t);for(let s=0;s<e.repeat;s++){if(t.ios){const m=setInterval(P);await v(e.duration),clearInterval(m)}else u.common.ReactNative.Vibration.vibrate(e.duration),await v(e.duration);if(t.stopping===!0){t.stopped=!0;break}e.gap&&await v(e.gap)}return l.splice(l.findIndex(function(s){return s.id===t.id}),1),i(t)}catch(t){alert(t.stack),console.error(t.stack)}}var N={patches:[function(){for(var e=0;e<l.length;e++)l[e].stopping=!0}],onUnload(){this.patches.every(function(e){return e(),!0})},onLoad(){var e=this;try{let r=function(p,n){typeof n<"u"&&"author"in n&&"avatar"in n.author&&"avatarURL"in n.author&&(s.BOT_AVATARS[n.author.avatar]=n.author.avatarURL,delete n.author.avatarURL);let c=t(p);return typeof n=="object"&&(c=u.findByProps("merge").merge(c,n)),i(p.channelId,c),console.log("VIBATE SEND MSG",{msg:c}),c};const{receiveMessage:i}=u.findByProps("sendMessage","receiveMessage"),{createBotMessage:t}=u.findByProps("createBotMessage"),s=u.findByProps("BOT_AVATARS"),m={author:{username:"vibrate",avatar:"command",avatarURL:I.command}},w={start:function(p,n){const c={...m,interaction:{name:"/vibrate start",user:f.metro.findByStoreName("UserStore").getCurrentUser()}};try{const a=new Map(p.map(function(o){return[o.name,o]})),d={duration:a.get("duration").value,repeat:a.get("repeat")?.value,gap:a.get("gap")?.value},h=`for ${d.duration}ms`+(d?.repeat?`, ${d.repeat} time${d.repeat===1?"":"s"}`:"")+(d?.gap?`. With a gap of ${d?.gap}ms`:"");B(d,async function(o){return await r({channelId:n.channel.id,embeds:[{type:"rich",title:"<:vibrating:1095354969965731921> Started vibrating",description:h,footer:{text:`ID: ${o.id}`}}]},c)},async function(o){const S=o.startO.id;r({channelId:n.channel.id,embeds:[{type:"rich",title:`<:still:1095977283212296194> ${o.stopped?"Stopp":"Finish"}ed vibrating`,footer:{text:`ID: ${o.id}`}}]},{...m,type:19,message_reference:{channel_id:n.channel.id,message_id:S,guild_id:n?.guild?.id},referenced_message:f.metro.findByStoreName("MessageStore").getMessage(n.channel.id,S)})})}catch(a){alert(a.stack),console.error(a),r({channelId:n.channel.id,content:`\`\`\`
${a.stack}\`\`\``,embeds:[{type:"rich",title:`<${g.getFailure()}> An error ocurred while running the command`.trim(),description:`Send a screenshot of this error and explain how you came to it, here: ${PLUGINS_FORUM_POST_URL}, to hopefully get this error solved!`}]},m)}},stop:function(p,n){const c={...m,interaction:{name:"/vibrate stop",user:f.metro.findByStoreName("UserStore").getCurrentUser()}};try{const a=new Map(p.map(function(o){return[o.name,o]})).get("id").value,d=l.findIndex(function(o){return o.id===a});if(d===-1){r({channelId:n.channel.id,embeds:{type:"rich",title:`<${g.getFailure()}> Vibration with id \`${a}\` not found.`}},c);return}const h=l[d];h.stopping=!0,h.startCbO=r({channelId:n.channel.id,embeds:[{type:"rich",title:`<${g.getLoading()}> Stopping vibration\u2026`,footer:{text:`ID: ${h.id}`}}]},c)}catch(a){alert(a.stack),console.error(a),r({channelId:n.channel.id,content:`\`\`\`
${a.stack}\`\`\``,embeds:[{type:"rich",title:`<${g.getFailure()}> An error ocurred while running the command`.trim(),description:`Send a screenshot of this error and explain how you came to it, here: ${PLUGINS_FORUM_POST_URL}, to hopefully get this error solved!`}]},m)}}};[b({execute:w.start,type:1,inputType:1,applicationId:"-1",name:"vibrate start",description:"Begin a brrr",options:[{type:4,required:!0,name:"duration",description:"Duration of one vibration (in milliseconds)",min_value:1},{type:4,name:"repeat",description:"Number of times to repeat"},{type:4,name:"gap",description:"Wait between vibrates (only matters if you have more than 1 repeat)"}]}),b({execute:w.stop,type:1,inputType:1,applicationId:"-1",name:"vibrate stop",description:"Stop a brrr",options:[{type:4,required:!0,name:"id",description:"Vibration id which you receive when starting a vibration"}]})].forEach(function(p){return e.patches.push(_.registerCommand(p))})}catch(r){console.error(r),alert(r.stack)}}};return y.default=N,Object.defineProperty(y,"__esModule",{value:!0}),y})({},vendetta);
