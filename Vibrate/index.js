(function(y,I){"use strict";function O(e){var r=Object.create(null);return e&&Object.keys(e).forEach(function(a){if(a!=="default"){var t=Object.getOwnPropertyDescriptor(e,a);Object.defineProperty(r,a,t.get?t:{enumerable:!0,get:function(){return e[a]}})}}),r.default=e,Object.freeze(r)}var h=O(I);function b(e,r,a){if(!e.name||!e?.description)throw new Error(`No name(${e?.name}) or description(${e?.description}) in the passed command (command name: ${e?.name})`);if(e.displayName=r?.names?.[a]??e.name,e.displayDescription=r?.names?.[a]??e.description,e.options){if(!Array.isArray(e.options))throw new Error(`Options is not an array (received: ${typeof e.options})`);e.options=e.options.map(function(t,c){if(!t?.name||!t?.description)throw new Error(`No name(${t?.name}) or description(${t?.description} in the option with index ${c}`);return t.displayName=r?.options?.[c]?.names?.[a]??t.name,t.displayDescription=r?.options?.[c]?.descriptions?.[a]??t.description,t})}return e}const f={loadingDiscordSpinner:"a:loading:1105495814073229393",aol:"a:aol:1108834296359301161",linuth:":linuth:1110531631409811547",fuckyoy:":fuckyoy:1108360628302782564",getLoading(){return Math.random()<.01?this?.aol:this.loadingDiscordSpinner},getFailure(){return Math.random()<.01?this?.fuckyoy:this.linuth},getSuccess(){return""}},_={command:"https://cdn.discordapp.com/attachments/1099116247364407337/1112129955053187203/command.png"},{metro:u,logger:D,commands:M}=h,{common:{ReactNative:P}}=u,{triggerHaptic:A}=u.findByProps("triggerHaptic"),w="1113021888109740083",S={author:{username:"Vibrate",avatar:"command",avatarURL:_.command}},U=function(e){return P.Platform.select(typeof e=="object"&&(e.hasOwnProperty("ios")||e.hasOwnProperty("android"))?e:{ios:[e],android:e})},v=function(e){return new Promise(function(r){return setTimeout(r,e)})};let B=0;const l=[];async function N(e,r,a){try{typeof e>"u"&&(e={}),e.repeat||(e.repeat=1);const t={id:B++,stopping:!1,stopped:!1,ios:U({ios:!0,android:!1})};l.push(t),console.log(t),t.startO=await r(t);for(let c=0;c<e.repeat;c++){if(t.ios){const g=setInterval(A);await v(e.duration),clearInterval(g)}else u.common.ReactNative.Vibration.vibrate(e.duration),await v(e.duration);if(t.stopping===!0){t.stopped=!0;break}e.gap&&await v(e.gap)}return l.splice(l.findIndex(function(c){return c.id===t.id}),1),a(t)}catch(t){console.error(t),alert(`An error ocurred at vibrate()
`+t.stack)}}var R={patches:[function(){for(var e=0;e<l.length;e++)l[e].stopping=!0}],onUnload(){this.patches.every(function(e){return e(),!0})},onLoad(){var e=this;try{let r=function(p,n){typeof n<"u"&&"author"in n&&"avatar"in n.author&&"avatarURL"in n.author&&(c.BOT_AVATARS[n.author.avatar]=n.author.avatarURL,delete n.author.avatarURL);let i=t(p);return typeof n=="object"&&(i=u.findByProps("merge").merge(i,n)),a(p.channelId,i),console.log("VIBATE SEND MSG",{msg:i}),i};const{receiveMessage:a}=u.findByProps("sendMessage","receiveMessage"),{createBotMessage:t}=u.findByProps("createBotMessage"),c=u.findByProps("BOT_AVATARS"),g={start:function(p,n){const i={...S,interaction:{name:"/vibrate start",user:h.metro.findByStoreName("UserStore").getCurrentUser()}};try{const s=new Map(p.map(function(o){return[o.name,o]})),d={duration:s.get("duration").value,repeat:s.get("repeat")?.value,gap:s.get("gap")?.value},m=`for ${d.duration}ms`+(d?.repeat?`, ${d.repeat} time${d.repeat===1?"":"s"}`:"")+(d?.gap?`. With a gap of ${d?.gap}ms`:"");N(d,async function(o){return await r({channelId:n.channel.id,embeds:[{type:"rich",title:"<:vibrating:1095354969965731921> Started vibrating",description:m,footer:{text:`ID: ${o.id}`}}]},i)},async function(o){const $=o.startO.id;r({channelId:n.channel.id,embeds:[{type:"rich",title:`<:still:1095977283212296194> ${o.stopped?"Stopp":"Finish"}ed vibrating`,footer:{text:`ID: ${o.id}`}}]},{...i,type:19,message_reference:{channel_id:n.channel.id,message_id:$,guild_id:n?.guild?.id},referenced_message:h.metro.findByStoreName("MessageStore").getMessage(n.channel.id,$)})})}catch(s){r({channelId:n.channel.id,content:`\`\`\`js
${s.stack}\`\`\``,embeds:[{type:"rich",title:`<${f.getFailure()}> An error ocurred while running the command`.trim(),description:`Send a screenshot of this error and explain how you came to it, here: ${PLUGINS_FORUM_POST_URL}, to hopefully get this error solved!`}]},i),console.error(s)}},stop:function(p,n){const i={...S,interaction:{name:"/vibrate stop",user:h.metro.findByStoreName("UserStore").getCurrentUser()}};try{const s=new Map(p.map(function(o){return[o.name,o]})).get("id").value,d=l.findIndex(function(o){return o.id===s});if(d===-1){r({channelId:n.channel.id,embeds:{type:"rich",title:`<${f.getFailure()}> Vibration with id \`${s}\` not found.`}},i);return}const m=l[d];m.stopping=!0,m.startCbO=r({channelId:n.channel.id,embeds:[{type:"rich",title:`<${f.getLoading()}> Stopping vibration\u2026`,footer:{text:`ID: ${m.id}`}}]},i)}catch(s){r({channelId:n.channel.id,content:`\`\`\`js
${s.stack}\`\`\``,embeds:[{type:"rich",title:`<${f.getFailure()}> An error ocurred while running the command`.trim(),description:`Send a screenshot of this error and explain how you came to it, here: ${PLUGINS_FORUM_POST_URL}, to hopefully get this error solved!`}]},i),console.error(s)}}};[b({execute:g.stop,type:1,inputType:1,applicationId:w,name:"vibrate stop",description:"Stop a brrr",options:[{type:4,required:!0,name:"id",description:"Vibration id which you receive when starting a vibration"}]}),b({execute:g.start,type:1,inputType:1,applicationId:w,name:"vibrate start",description:"Begin a brrr",options:[{type:4,required:!0,name:"duration",description:"Duration of one vibration (ms)",min_value:1},{type:4,name:"repeat",description:"Number of times to repeat"},{type:4,name:"gap",description:"Wait between vibrations (only matters if you have more than 1 repeat)"}]})].forEach(function(p){return e.patches.unshift(M.registerCommand(p))})}catch(r){console.error(r),alert(`There was an error while loading Vibrate
`+r.stack)}}};return y.default=R,Object.defineProperty(y,"__esModule",{value:!0}),y})({},vendetta);
