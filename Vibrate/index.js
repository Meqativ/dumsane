(function(f){"use strict";function y(e,n,d){if(console.log(e),!e.name||!e?.description)throw new Error(`No name(${e?.name}) or description(${e?.description}) in the passed command (command name: ${e?.name})`);if(e.displayName=n?.names?.[d]??e.name,e.displayDescription=n?.names?.[d]??e.description,e.options){if(!Array.isArray(e.options))throw new Error(`Options is not an array (received: ${typeof e.options})`);e.options=e.options.map(function(t,i){if(!t?.name||!t?.description)throw new Error(`No name(${t?.name}) or description(${t?.description} in the option with index ${i}`);return t.displayName=n?.options?.[i]?.names?.[d]??t.name,t.displayDescription=n?.options?.[i]?.descriptions?.[d]??t.description,t})}return console.log(e),e}const h={loadingDiscordSpinner:":loading:1105495814073229393",aol:"a:aol:1108834296359301161",linuth:":linuth:1110531631409811547",fuckyoy:":fuckyoy:1108360628302782564",getLoading(){return Math.random()<.01?this?.aol:this.loadingDiscordSpinner},getFailure(){return Math.random()<.01?this?.fuckyoy:this.linuth},getSuccess(){return""}},{metro:m,logger:S,commands:b}=vendetta,v=vendetta.metro.common.ReactNative.Vibration,{triggerHaptic:w}=vendetta.metro.findByProps("triggerHaptic"),I=function(e){return m.findByProps("View").Platform.select(typeof e=="object"&&(e.hasOwnProperty("ios")||e.hasOwnProperty("android"))?e:{ios:[e],android:e})},g=function(e){return new Promise(function(n){return setTimeout(n,e)})},p=[];async function $(e,n,d){try{typeof e>"u"&&(e={}),e.repeat||(e.repeat=1);const t={id:+Date.now(),stopping:!1,stopped:!1,ios:I({ios:!0,android:!1})};p.push(t),console.log(t),n(t);for(let i=0;i<e.repeat;i++){if(t.ios){const s=setInterval(function(){return w()},5);await g(e.duration),clearInterval(s)}else v.vibrate(1e69),await g(e.duration),v.clear();if(t.stopping===!0){t.stopped=!0;break}e.gap&&await g(e.gap)}t.deleted=delete p[p.findIndex(function(i){return i.id===t.id})],d(t)}catch(t){alert(t.stack),console.error(t.stack)}}const A={patches:[function(){for(var e=0;e<p.length;e++)p[e].stopping=!0}],onUnload(){this.patches.every(function(e){return e(),!0})},onLoad(){var e=this;try{let n=function(s,r){typeof r<"u"&&"author"in r&&"avatar"in r.author&&"avatarURL"in r.author&&(i.BOT_AVATARS[r.author.avatar]=r.author.avatarURL,delete r.author.avatarURL);let a=t(s);return typeof r=="object"&&(a=m.findByProps("merge").merge(a,r)),d(s.channelId,a),console.log("VIBATE SEND MSG",{msg:a}),a};const{receiveMessage:d}=m.findByProps("sendMessage","receiveMessage"),{createBotMessage:t}=m.findByProps("createBotMessage"),i=m.findByProps("BOT_AVATARS");[y({execute:function(s,r){const a={author:{username:"/vibrate start",avatar:"command",avatarURL:AVATARS.command}};console.log(a);try{const o=new Map(s.map(function(l){return[l.name,l]})),c={duration:o.get("duration").value,repeat:o.get("repeat")?.value,gap:o.get("gap")?.value},u=`for ${c.duration}ms`+(c?.repeat?`, ${c.repeat} time${c.repeat===1?"":"s"}`:"")+(c?.gap?`. With a gap of ${c?.gap}ms.`:"");$(c,async function(l){n({channelId:r.channel.id,embeds:[{type:"rich",title:"<:vibrating:1095354969965731921> Started vibrating",description:u,fields:[{value:`${l.id}`,name:"Vibration ID"}]}]},a)},async function(l){n({channelId:r.channel.id,embeds:[{type:"rich",title:`<:still:1095977283212296194> ${l.stopped?"Abort":"Finish"}ed vibrating`,fields:[{value:`${l.id}`,name:"Vibration ID"}]}]},a)})}catch(o){alert(o.stack),console.error(o),n({channelId:r.channel.id,content:`\`\`\`
${o.stack}\`\`\``,embeds:[{type:"rich",title:`<${h.getFailure()}> An error ocurred while running the command`.trim(),description:`Send a screenshot of this error and explain how you came to it, here: ${PLUGINS_FORUM_POST_URL}, to hopefully get this error solved!`}]},a)}},type:1,inputType:1,applicationId:"-1",name:"vibrate start",description:"Begin a brrr",options:[{type:4,required:!0,name:"duration",description:"Duration of one vibration (in milliseconds)",min_value:1},{type:4,name:"repeat",description:"Number of times to repeat"},{type:4,name:"gap",description:"Wait between vibrates (only matters if you have more than 1 repeat)"}]}),y({execute:function(s,r){const a={author:{username:"/vibrate stop",avatar:"command",avatarURL:AVATARS.command}};console.log(a);try{const o=new Map(s.map(function(u){return[u.name,u]})).get("id").value,c=p.findIndex(function(u){return u.id===o});if(c===-1){n({channelId:r.channel.id,embeds:{type:"rich",title:`<${h.getFailure()}> Invalid vibration ID`.trim,fields:[{value:`${o}`,name:"Vibration ID"}]}},a);return}p[c].stopping=!0,n({channelId:r.channel.id,embeds:[{type:"rich",title:`<${h.getLoading()}> Aborting vibration\u2026`,fields:[{value:`${o}`,name:"Vibration ID"}]}]},a)}catch(o){alert(o.stack),console.error(o),n({channelId:r.channel.id,content:`\`\`\`
${o.stack}\`\`\``,embeds:[{type:"rich",title:`<${h.getFailure()}> An error ocurred while running the command`.trim(),description:`Send a screenshot of this error and explain how you came to it, here: ${PLUGINS_FORUM_POST_URL}, to hopefully get this error solved!`}]},a)}},type:1,inputType:1,applicationId:"-1",name:"vibrate stop",description:"Stop a brrr",options:[{type:4,required:!0,name:"id",description:"Vibration id which you receive when starting a vibration"}]})].forEach(function(s){return e.patches.push(b.registerCommand(s))})}catch(n){console.error(n),alert(n.stack)}}};return f.default=A,Object.defineProperty(f,"__esModule",{value:!0}),f})({});
