(function(m){"use strict";function g(e,t,o){if(!e.name||!e?.description)throw new Error(`No name(${e?.name}) or description(${e?.description}) in the passed command. (command name: ${e?.name})`);return e.displayName=t?.names?.[o]??e.name,e.displayDescription=t?.names?.[o]??e.description,e.options&&(e.options=e.options.map(function(i,u){if(!i?.name||!i?.description)throw new Error(`No name(${i?.name}) or description(${i?.description} in the option with index ${u}`);return i.displayName=t?.options?.[u]?.names?.[o]??i.name,i.displayDescription=t?.options?.[u]?.descriptions?.[o]??i.description,i})),e}const h={loadingDiscordSpinner:":loading:1105495814073229393",aol:"a:aol:1108834296359301161",linuth:":linuth:1110531631409811547",fuckyoy:":fuckyoy:1108360628302782564",getLoading(){return Math.random()<.01?this?.aol:this.loadingDiscordSpinner},getFail(){return Math.random()<.01?this?.fuckyoy:this.linuth},getSuccess(){return""}},{metro:s,logger:M,commands:b}=vendetta,{vibrate:I}=s.findByProps("vibrate"),f=function(e){return"ios"in e||"android"in e?s.findByProps("View").Platform.select:s.findByProps("View").Platform.select({ios:[e],android:e})},v=function(e){return new Promise(function(t){return setTimeout(t,e)})},l={patches:[],onUnload:function(){this.patches.every(function(e){return e(),!0})}},y=[];async function w(e){typeof e>"u"&&(e={}),"duration"in e||(e.duration=400),"repeat"in e||(e.repeat=1),"gap"in e||(e.gap=0),f({ios:!0})&&duration>400&&(duration=400);const t={id:+Date.now(),aborting:!1};cb1(t);for(let o=0;o<repeat;o++){if(I(f(e.duration),!0),await v(e.duration),t.aborting===!0){t.aborted=!0;break}await v(e.gap)}cb(t)}return l.onLoad=function(){try{let e=function(d,n){n?.author.avatar&&n?.author?.avatarURL&&(i.BOT_AVATARS[n.author.avatar]=n.author.avatarURL,delete n.author.avatarURL);let a=o.createBotMessage(d);return a=s.findByProps("merge").merge(a,n),t.receiveMessage(d.channelId,a),a};const t=s.findByProps("sendMessage","receiveMessage"),o=s.findByProps("createBotMessage"),i=s.findByProps("BOT_AVATARS"),u={abort(){const d={username:"/vibrate abort",avatar:"clyde"},n=new Map(args.map(function(r){return[r.name,r]})).get("id").value,a=y.findIndex(function(r){return r.id===n});if(a===-1){e({channelId:context.channel.id,embeds:{title:`${h.getFail()} Invalid vibration ID`.trim,fields:[{value:vibration.id,name:"Vibration ID"}]}},d);return}y[a].aborting=!0,e({channelId:context.channel.id,embeds:[{title:`${h.getLoading()} Aborting vibration\u2026`,fields:[{value:n,name:"Vibration ID"}]}]},d)},begin(d,n){const a={username:"/vibrate begin",avatar:"clyde"};try{const r=new Map(d.map(function(p){return[p.name,p]})),c={duration:r.get("duration").value,repeat:r.get("repeat")?.value,gap:r.get("gap")?.value};w(c,function(p){e({channelId:n.channel.id,embeds:[{title:"<:vibrating:1095354969965731921> Started vibrating",description:`for ${c.duration}ms`+(c?.repeat?`, ${c.repeat} time${c.repeat===1?"":"s"}`:"")+"."+(c?.gap?`With a gap of ${c?.gap}ms.`:""),fields:[{value:p.id,name:"Vibration ID"}]}]},a)},function(p,$){e({channelId:n.channel.id,embeds:[{title:`<:still:1095977283212296194> ${$?"Abort":"Finish"}ed vibrating`,fields:[{value:p.id,name:"Vibration ID"}]}]},a)})}catch(r){console.error(r),e({channelId:n.channel.id,content:`\`\`\`
${r.stack}\`\`\``,embeds:[{title:`${h.getFailure()} An error ocurred while running the command`.trim(),description:`Send a screenshot of this error and explain how you came to it, here: ${PLUGINS_FORUM_POST_URL}, to hopefully get this error solved!`}]},a)}}};l.patches.push(b.registerCommand(g({execute:u.begin,type:1,inputType:1,applicationId:"-1",name:"vibrate begin",description:"b"+"r".repeat(50),options:[{type:4,required:!0,name:"duration",description:"Duration of one vibration (in milliseconds)",min_value:1,max_value:9999},{type:4,name:"repeat",description:"Number of times to repeat",min_value:1,max_value:9999999},{type:4,name:"gap",description:"Wait between vibrates (only matters if you have more than 1 repeat)"}]}))),l.patches.push(b.registerCommand(g({execute:u.abort,type:1,inputType:1,applicationId:"-1",name:"vibrate abort",description:"b"+"r".repeat(50),options:[{type:4,required:!0,name:"id",description:"Vibration id, that you receive when running /vibrate begin"}]})))}catch(e){alert(e.stack)}},m.default=l,Object.defineProperty(m,"__esModule",{value:!0}),m})({});
