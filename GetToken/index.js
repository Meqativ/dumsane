(function(p){"use strict";function u(e,n,r){if(!e.name||!e?.description)throw new Error(`No name(${e?.name}) or description(${e?.description}) in the passed command. (command name: ${e?.name})`);return e.displayName=n?.names?.[r]??e.name,e.displayDescription=n?.names?.[r]??e.description,e.options&&(e.options=e.options.map(function(o,s){if(!o?.name||!o?.description)throw new Error(`No name(${o?.name}) or description(${o?.description} in the option with index ${s}`);return o.displayName=n?.options?.[s]?.names?.[r]??o.name,o.displayDescription=n?.options?.[s]?.descriptions?.[r]??o.description,o})),e}const m={loadingDiscordSpinner:":loading:1105495814073229393",aol:"a:aol:1108834296359301161",linuth:":linuth:1110531631409811547",fuckyoy:":fuckyoy:1108360628302782564",getLoading(){return Math.random()<.01?this?.aol:this.loadingDiscordSpinner},getFailure(){return Math.random()<.01?this?.fuckyoy:this.linuth},getSuccess(){return""}},h={command:"https://cdn.discordapp.com/attachments/1099116247364407337/1112129955053187203/command.png"};var g={patches:[],onUnload(){this.patches.every(function(e){return e(),!0})},onLoad(){try{let e=function(d,t){typeof t<"u"&&"author"in t&&"avatar"in t.author&&"avatarURL"in t.author&&(f.BOT_AVATARS[t.author.avatar]=t.author.avatarURL,delete t.author.avatarURL);let a=y(d);return typeof t=="object"&&(a=n.findByProps("merge").merge(a,t)),s(d.channelId,a),a};const{metro:n,commands:r,logger:o}=vendetta,{receiveMessage:s}=n.findByProps("sendMessage","receiveMessage"),{createBotMessage:y}=n.findByProps("createBotMessage"),f=n.findByProps("BOT_AVATARS"),l={get(d,t){const a={author:{username:"/token get",avatar:"command",avatarURL:h.command}};try{const{getToken:i}=n.findByProps("getToken");e({channelId:t.channel.id,embeds:[{type:"rich",title:"Token of the current account",description:`${i()}`}]},a)}catch(i){console.error(i),alert(i)}},async login(d,t){const a={author:{username:"/token login",avatar:"command",avatarURL:h.command}};try{const i=vendetta.metro.findByProps("login","logout","switchAccountToken").switchAccountToken,k=new Map(d.map(function(c){return[c.name,c]}));try{const c=await i(k.get("token").value);alert(JSON.stringify(c,0,4)),e({channelId:t.channel.id,embeds:[{type:"rich",title:`<${m.getLoading()}> Switching accounts\u2026`}]},a)}catch(c){e({channelId:t.channel.id,embeds:[{type:"rich",title:`<${m.getFailure()}> Invalid token (failed to add/switch to the account)`,description:`${c.message}`}]},a),console.error(c)}}catch(i){console.error(i),alert(i)}}};this.patches.push(r.registerCommand(u({execute:l.get,name:"token get",description:"Shows your current user token",applicationId:"-1",inputType:1,type:1}))),this.patches.push(r.registerCommand(u({execute:l.login,name:"token get",description:"Logs into an account using a token",options:{required:!0,type:1,name:"token",description:"Token of the account to login into"},applicationId:"-1",inputType:1,type:1})))}catch(e){alert(e)}}};return p.default=g,Object.defineProperty(p,"__esModule",{value:!0}),p})({});
