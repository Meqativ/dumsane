(function(p){"use strict";function u(e,n,i){if(!e.name||!e?.description)throw new Error(`No name(${e?.name}) or description(${e?.description}) in the passed command (command name: ${e?.name})`);if(e.displayName=n?.names?.[i]??e.name,e.displayDescription=n?.names?.[i]??e.description,e.options){if(!Array.isArray(e.options))throw new Error(`Options is not an array (received: ${typeof e.options})`);e.options=e.options.map(function(o,s){if(!o?.name||!o?.description)throw new Error(`No name(${o?.name}) or description(${o?.description} in the option with index ${s}`);return o.displayName=n?.options?.[s]?.names?.[i]??o.name,o.displayDescription=n?.options?.[s]?.descriptions?.[i]??o.description,o})}return e}const m={loadingDiscordSpinner:"a:loading:1105495814073229393",aol:"a:aol:1108834296359301161",linuth:":linuth:1110531631409811547",fuckyoy:":fuckyoy:1108360628302782564",getLoading(){return Math.random()<.01?this?.aol:this.loadingDiscordSpinner},getFailure(){return Math.random()<.01?this?.fuckyoy:this.linuth},getSuccess(){return""}},l={command:"https://cdn.discordapp.com/attachments/1099116247364407337/1112129955053187203/command.png"};var g={patches:[],onUnload(){this.patches.every(function(e){return e(),!0})},onLoad(){try{let e=function(d,t){typeof t<"u"&&"author"in t&&"avatar"in t.author&&"avatarURL"in t.author&&(y.BOT_AVATARS[t.author.avatar]=t.author.avatarURL,delete t.author.avatarURL);let r=s(d);return typeof t=="object"&&(r=n.findByProps("merge").merge(r,t)),o(d.channelId,r),r};const{metro:n,commands:i}=vendetta,{receiveMessage:o}=n.findByProps("sendMessage","receiveMessage"),{createBotMessage:s}=n.findByProps("createBotMessage"),y=n.findByProps("BOT_AVATARS"),h={get(d,t){const r={author:{username:"/token get",avatar:"command",avatarURL:l.command}};try{const{getToken:a}=n.findByProps("getToken");e({channelId:t.channel.id,embeds:[{type:"rich",title:"Token of the current account",description:`${a()}`}]},r)}catch(a){console.error(a),alert(a.stack)}},async login(d,t){const r={author:{username:"/token login",avatar:"command",avatarURL:l.command}};try{const a=new Map(d.map(function(c){return[c.name,c]})).get("token").value;console.log(a);try{e({channelId:t.channel.id,embeds:[{type:"rich",title:`<${m.getLoading()}> Switching accounts\u2026`}]},r),vendetta.metro.findByProps("login","logout","switchAccountToken").switchAccountToken(a)}catch(c){alert(c.stack),console.error(c),e({channelId:t.channel.id,embeds:[{type:"rich",title:`<${m.getFailure()}> Invalid token (failed to add/switch to the account)`,description:`${c.message}`}]},r)}}catch(a){console.error(a),alert(a.stack)}}};console.log("meow 66"),this.patches.push(i.registerCommand(u({execute:h.get,name:"token get",description:"Shows your current user token",applicationId:"-1",inputType:1,type:1}))),console.log("meow 77"),this.patches.push(i.registerCommand(u({execute:h.login,name:"token login",description:"Logs into an account using a token",options:[{required:!0,type:3,name:"token",description:"Token of the account to login into"}],applicationId:"-1",inputType:1,type:1})))}catch(e){alert(e.stack)}}};return p.default=g,Object.defineProperty(p,"__esModule",{value:!0}),p})({});
