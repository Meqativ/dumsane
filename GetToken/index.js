(function(c,g,y,s){"use strict";function m(e,r,a){if(!e.name||!e?.description)throw new Error(`No name(${e?.name}) or description(${e?.description}) in the passed command (command name: ${e?.name})`);if(e.displayName=r?.names?.[a]??e.name,e.displayDescription=r?.names?.[a]??e.description,e.options){if(!Array.isArray(e.options))throw new Error(`Options is not an array (received: ${typeof e.options})`);e.options=e.options.map(function(t,n){if(!t?.name||!t?.description)throw new Error(`No name(${t?.name}) or description(${t?.description} in the option with index ${n}`);return t.displayName=r?.options?.[n]?.names?.[a]??t.name,t.displayDescription=r?.options?.[n]?.descriptions?.[a]??t.description,t})}return e}function f(e){const{receiveMessage:r}=metro.findByProps("sendMessage","receiveMessage"),{createBotMessage:a}=metro.findByProps("createBotMessage"),t=metro.findByProps("BOT_AVATARS");return function(n,o){typeof o<"u"&&"author"in o&&"avatar"in o.author&&"avatarURL"in o.author&&(t.BOT_AVATARS[o.author.avatar]=o.author.avatarURL,delete o.author.avatarURL);let i=a(n);return typeof o=="object"&&(i=metro.findByProps("merge").merge(i,o)),r(n.channelId,i),i}}const h={loadingDiscordSpinner:"a:loading:1105495814073229393",aol:"a:aol:1108834296359301161",linuth:":linuth:1110531631409811547",fuckyoy:":fuckyoy:1108360628302782564",getLoading(){return Math.random()<.01?this?.aol:this.loadingDiscordSpinner},getFailure(){return Math.random()<.01?this?.fuckyoy:this.linuth},getSuccess(){return""}},k={command:"https://cdn.discordapp.com/attachments/1099116247364407337/1112129955053187203/command.png"},{meta:{resolveSemanticColor:w}}=s.findByProps("colors","meta"),v=s.findByStoreName("ThemeStore"),d=function(){return w(v.theme,g.semanticColors.BACKGROUND_SECONDARY)},u={author:{username:"TokenUtils",avatar:"command",avatarURL:k.command}};let l;function p(){return window.sendMessage?window.sendMessage?.(...arguments):(l||(l=f(vendetta)),l(...arguments))}var T={patches:[],onUnload(){this.patches.forEach(function(e){return e()})},onLoad(){var e=this;try{const r={get(a,t){try{const n={...u,interaction:{name:"/token get",user:s.findByStoreName("UserStore").getCurrentUser()}},{getToken:o}=s.findByProps("getToken");p({channelId:t.channel.id,embeds:[{color:d(),type:"rich",title:"Token of the current account",description:`${o()}`}]},n)}catch(n){console.error(n),alert(`There was an error while exeCuting /token get
`+n.stack)}},login(a,t){try{const n={...u,interaction:{name:"/token login",user:s.findByStoreName("UserStore").getCurrentUser()}},o=new Map(a.map(function(i){return[i.name,i]})).get("token").value;try{p({channelId:t.channel.id,embeds:[{color:d(),type:"rich",title:`<${h.getLoading()}> Switching accounts\u2026`}]},n),s.findByProps("login","logout","switchAccountToken").switchAccountToken(o)}catch(i){console.error(i),p({channelId:t.channel.id,embeds:[{color:d(),type:"rich",title:`<${h.getFailure()}> Failed to switch accounts`,description:`${i.message}`}]},n)}}catch(n){console.error(n),alert(`There was an error while executing /token login
`+n.stack)}}};[m({type:1,inputType:1,applicationId:"-1",execute:r.get,name:"token get",description:"Shows your current user token"}),m({type:1,inputType:1,applicationId:"-1",execute:r.login,name:"token login",description:"Logs into an account using a token",options:[{required:!0,type:3,name:"token",description:"Token of the account to login into"}]})].forEach(function(a){return e.patches.unshift(y.registerCommand(a))})}catch(r){console.error(r),alert(`There was an error while loading TokenUtils
`+r.stack)}}};return c.EMBED_COLOR=d,c.authorMods=u,c.default=T,Object.defineProperty(c,"__esModule",{value:!0}),c})({},vendetta.ui,vendetta.commands,vendetta.metro);
