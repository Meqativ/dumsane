(function(p){"use strict";function u(e,n,i){if(!e.name||!e?.description)throw new Error(`No name(${e?.name}) or description(${e?.description}) in the passed command (command name: ${e?.name})`);if(e.displayName=n?.names?.[i]??e.name,e.displayDescription=n?.names?.[i]??e.description,e.options){if(!Array.isArray(e.options))throw new Error(`Options is not an array (received: ${typeof e.options})`);e.options=e.options.map(function(o,s){if(!o?.name||!o?.description)throw new Error(`No name(${o?.name}) or description(${o?.description} in the option with index ${s}`);return o.displayName=n?.options?.[s]?.names?.[i]??o.name,o.displayDescription=n?.options?.[s]?.descriptions?.[i]??o.description,o})}return e}const l={loadingDiscordSpinner:"a:loading:1105495814073229393",aol:"a:aol:1108834296359301161",linuth:":linuth:1110531631409811547",fuckyoy:":fuckyoy:1108360628302782564",getLoading(){return Math.random()<.01?this?.aol:this.loadingDiscordSpinner},getFailure(){return Math.random()<.01?this?.fuckyoy:this.linuth},getSuccess(){return""}},g={command:"https://cdn.discordapp.com/attachments/1099116247364407337/1112129955053187203/command.png"};var y={patches:[],onUnload(){this.patches.every(function(e){return e(),!0})},onLoad(){try{let e=function(c,t){typeof t<"u"&&"author"in t&&"avatar"in t.author&&"avatarURL"in t.author&&(f.BOT_AVATARS[t.author.avatar]=t.author.avatarURL,delete t.author.avatarURL);let a=s(c);return typeof t=="object"&&(a=n.findByProps("merge").merge(a,t)),o(c.channelId,a),a};const{metro:n,commands:i}=vendetta,{receiveMessage:o}=n.findByProps("sendMessage","receiveMessage"),{createBotMessage:s}=n.findByProps("createBotMessage"),f=n.findByProps("BOT_AVATARS"),h={author:{username:"TokenUtils",avatar:"command",avatarURL:g.command}},m={get(c,t){const a={...h,interaction:{name:"/token get",user:n.findByStoreName("UserStore").getCurrentUser()}};try{const{getToken:r}=n.findByProps("getToken");e({channelId:t.channel.id,embeds:[{type:"rich",title:"Token of the current account",description:`${r()}`}]},a)}catch(r){console.error(r),alert(`There was an error while exeCuting /token get
`+r.stack)}},login(c,t){const a={...h,interaction:{name:"/token login",user:n.findByStoreName("UserStore").getCurrentUser()}};try{const r=new Map(c.map(function(d){return[d.name,d]})).get("token").value;console.log(r);try{e({channelId:t.channel.id,embeds:[{type:"rich",title:`<${l.getLoading()}> Switching accounts\u2026`}]},a),vendetta.metro.findByProps("login","logout","switchAccountToken").switchAccountToken(r)}catch(d){e({channelId:t.channel.id,embeds:[{type:"rich",title:`<${l.getFailure()}> Failed to login`,description:`${d.message}`}]},a),console.error(d)}}catch(r){console.error(r),alert(`There was an error while exeCuting /token login
`+r.stack)}}};this.patches.push(i.registerCommand(u({execute:m.get,name:"token get",description:"Shows your current user token",applicationId:"-1",inputType:1,type:1}))),this.patches.push(i.registerCommand(u({execute:m.login,name:"token login",description:"Logs into an account using a token",options:[{required:!0,type:3,name:"token",description:"Token of the account to login into"}],applicationId:"-1",inputType:1,type:1})))}catch(e){console.error(e),alert(`There was an error while loading TokenUtils(GetToken)
`+e.stack)}}};return p.default=y,Object.defineProperty(p,"__esModule",{value:!0}),p})({});
