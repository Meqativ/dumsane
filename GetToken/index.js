(function(p){"use strict";function m(t,i,c){if(!t.name||!t?.description)throw new Error(`No name(${t?.name}) or description(${t?.description}) in the passed command. (command name: ${t?.name})`);return t.displayName=i?.names?.[c]??t.name,t.displayDescription=i?.names?.[c]??t.description,t.options&&(t.options=t.options.map(function(n,s){if(!n?.name||!n?.description)throw new Error(`No name(${n?.name}) or description(${n?.description} in the option with index ${s}`);return n.displayName=i?.options?.[s]?.names?.[c]??n.name,n.displayDescription=i?.options?.[s]?.descriptions?.[c]??n.description,n})),t}const h={loadingDiscordSpinner:":loading:1105495814073229393",aol:"a:aol:1108834296359301161",linuth:":linuth:1110531631409811547",fuckyoy:":fuckyoy:1108360628302782564",getLoading(){return Math.random()<.01?this?.aol:this.loadingDiscordSpinner},getFailure(){return Math.random()<.01?this?.fuckyoy:this.linuth},getSuccess(){return""}},l={command:"https://cdn.discordapp.com/attachments/1099116247364407337/1112129955053187203/command.png"};var g={patches:[],onUnload(){this.patches.every(function(t){return t(),!0})},onLoad(){const{metro:t,commands:i,logger:c}=vendetta,{receiveMessage:n}=t.findByProps("sendMessage","receiveMessage"),{createBotMessage:s}=t.findByProps("createBotMessage"),y=t.findByProps("BOT_AVATARS");function u(d,e){typeof e<"u"&&"author"in e&&"avatar"in e.author&&"avatarURL"in e.author&&(y.BOT_AVATARS[e.author.avatar]=e.author.avatarURL,delete e.author.avatarURL);let o=s(d);return typeof e=="object"&&(o=t.findByProps("merge").merge(o,e)),n(d.channelId,o),o}const f={get(d,e){const o={author:{username:"/token get",avatar:"command",avatarURL:l.command}};try{const{getToken:a}=t.findByProps("getToken");u({channelId:e.channel.id,embeds:[{type:"rich",title:"Token of the current account",description:`${a()}`}]},o)}catch(a){console.error(a),alert(a)}},async login(d,e){const o={author:{username:"/token login",avatar:"command",avatarURL:l.command}};try{const a=vendetta.metro.findByProps("login","logout","switchAccountToken").switchAccountToken,k=new Map(d.map(function(r){return[r.name,r]}));try{const r=await a(k.get("token").value);alert(JSON.stringify(r,0,4)),u({channelId:e.channel.id,embeds:[{type:"rich",title:`<${h.getLoading()}> Switching accounts\u2026`}]},o)}catch(r){u({channelId:e.channel.id,embeds:[{type:"rich",title:`<${h.getFailure()}> Invalid token (failed to add/switch to the account)`,description:`${r.message}`}]},o),console.error(r)}}catch(a){console.error(a),alert(a)}}};this.patches.push(i.registerCommand(m({execute:f.get,name:"token get",description:"Shows your current user token",applicationId:"-1",inputType:1,type:1}))),this.patches.push(i.registerCommand(m({name:"token get",description:"Logs into an account using a token",options:{required:!0,type:1,name:"token",description:"Token of the account to login into"},applicationId:"-1",inputType:1,type:1})))}};return p.default=g,Object.defineProperty(p,"__esModule",{value:!0}),p})({});
