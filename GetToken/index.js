(function(p){"use strict";function u(t,n,r){if(!t.name||!t?.description)throw new Error(`No name(${t?.name}) or description(${t?.description}) in the passed command. (command name: ${t?.name})`);return t.displayName=n?.names?.[r]??t.name,t.displayDescription=n?.names?.[r]??t.description,t.options&&(t.options=t.options.map(function(o,s){if(!o?.name||!o?.description)throw new Error(`No name(${o?.name}) or description(${o?.description} in the option with index ${s}`);return o.displayName=n?.options?.[s]?.names?.[r]??o.name,o.displayDescription=n?.options?.[s]?.descriptions?.[r]??o.description,o})),t}const m={loadingDiscordSpinner:":loading:1105495814073229393",aol:"a:aol:1108834296359301161",linuth:":linuth:1110531631409811547",fuckyoy:":fuckyoy:1108360628302782564",getLoading(){return Math.random()<.01?this?.aol:this.loadingDiscordSpinner},getFailure(){return Math.random()<.01?this?.fuckyoy:this.linuth},getSuccess(){return""}},h={command:"https://cdn.discordapp.com/attachments/1099116247364407337/1112129955053187203/command.png"};var g={patches:[],onUnload(){this.patches.every(function(t){return t(),!0})},onLoad(){try{let t=function(d,e){typeof e<"u"&&"author"in e&&"avatar"in e.author&&"avatarURL"in e.author&&(f.BOT_AVATARS[e.author.avatar]=e.author.avatarURL,delete e.author.avatarURL);let a=y(d);return typeof e=="object"&&(a=n.findByProps("merge").merge(a,e)),s(d.channelId,a),a};const{metro:n,commands:r,logger:o}=vendetta,{receiveMessage:s}=n.findByProps("sendMessage","receiveMessage"),{createBotMessage:y}=n.findByProps("createBotMessage"),f=n.findByProps("BOT_AVATARS"),l={get(d,e){const a={author:{username:"/token get",avatar:"command",avatarURL:h.command}};try{const{getToken:i}=n.findByProps("getToken");t({channelId:e.channel.id,embeds:[{type:"rich",title:"Token of the current account",description:`${i()}`}]},a)}catch(i){console.error(i),alert(i.stack)}},async login(d,e){const a={author:{username:"/token login",avatar:"command",avatarURL:h.command}};try{const i=vendetta.metro.findByProps("login","logout","switchAccountToken").switchAccountToken,k=new Map(d.map(function(c){return[c.name,c]}));try{const c=await i(k.get("token").value);alert(JSON.stringify(c,0,4)),t({channelId:e.channel.id,embeds:[{type:"rich",title:`<${m.getLoading()}> Switching accounts\u2026`}]},a)}catch(c){t({channelId:e.channel.id,embeds:[{type:"rich",title:`<${m.getFailure()}> Invalid token (failed to add/switch to the account)`,description:`${c.message}`}]},a),console.error(c)}}catch(i){console.error(i),alert(i.stack)}}};this.patches.push(r.registerCommand(u({execute:l.get,name:"token get",description:"Shows your current user token",applicationId:"-1",inputType:1,type:1}))),this.patches.push(r.registerCommand(u({execute:l.login,name:"token get",description:"Logs into an account using a token",options:{required:!0,type:1,name:"token",description:"Token of the account to login into"},applicationId:"-1",inputType:1,type:1})))}catch(t){alert(t.stack)}}};return p.default=g,Object.defineProperty(p,"__esModule",{value:!0}),p})({});
