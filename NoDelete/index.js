(function(n,a,t,m,o,c,h){"use strict";t.storage.ignore||(t.storage.ignore={users:[],bots:!1}),"timestamps"in t.storage||(t.storage.timestamps=!1),"onlyTimestamps"in t.storage||(t.storage.onlyTimestamps=!1),"ew"in t.storage||(t.storage.ew=!1);function g(r){return m.useProxy(t.storage),a.React.createElement(a.ReactNative.ScrollView,{style:{flex:1}},[{type:"switch",label:"Show the time of deletion",propId:"timestamps"},{type:"switch",label:"Use AM/PM",propId:"ew"},{type:"separator"},{type:"switch",label:"Ignore bots"},{type:"text",label:"The plugin does not keep the messages you've deleted"}].map(function(e){if(e.type==="switch")return a.React.createElement(o.Forms.FormRow,{label:e.label,trailing:a.React.createElement(o.Forms.FormSwitch,{value:t.storage[e.propId],onValueChange:function(s){return t.storage[e.propId]=s}})});if(e.type==="text")return a.React.createElement(o.Forms.FormLabel,{label:e.label});if(e.type==="separator")return a.React.createElement(o.Forms.FormDivider,null)}))}let d,i=[];var y={settings:g,onLoad(){t.storage.ignore.users=["571661221854707713"];try{this.onUnload=c.before("dispatch",a.FluxDispatcher,function(r){d||(d=h.findByStoreName("MessageStore"));const e=r[0];if(e&&!e?.optimistic&&e?.type==="MESSAGE_DELETE"){if(!e?.id||!e?.channelId)return;const s=d.getMessage(e.channelId,e.id);if(console.log(s,e),t.storage.ignore.users.includes(s?.author?.id)||t.storage.ignore.bots&&s?.author?.bot)return;if(i.includes(e.id))return i.splice(i.indexOf(e.id),1),r;i.push(e.id);let l=t.storage.onlyTimestamp?"":t.storage.message?.trim?.()||"This message was deleted";return(t.storage.timestamps||t.storage.onlyTimestamp)&&(l+=` (${a.moment().format(t.storage.ew?"hh:mm:ss.SS a":"HH:mm:ss.SS")})`),r[0]={type:"MESSAGE_EDIT_FAILED_AUTOMOD",messageData:{type:1,message:{channelId:e.channelId,messageId:e.id}},errorResponseBody:{code:2e5,message:l}},r}})}catch(r){alert(`NoDelete died
`+r.stack),console.error(r)}}};return n.default=y,Object.defineProperty(n,"__esModule",{value:!0}),n})({},vendetta.metro.common,vendetta.plugin,vendetta.storage,vendetta.ui.components,vendetta.patcher,vendetta.metro);
