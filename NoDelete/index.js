(function(o,d,i,l){"use strict";const{React:r,ReactNative:m}=vendetta.metro.common,{plugin:{storage:a},storage:{useProxy:c},ui:{components:{Forms:u}}}=vendetta;"timestamps"in a||(a.timestamps=!1);const{FormRow:h,FormSection:E,FormSwitch:f}=u;function g(t){return c(a),r.createElement(m.ScrollView,{style:{flex:1}},[{label:"Show the time of deletion",default:!1,id:"timestamps"},{label:"Use AM/PM",default:!1,id:"ew"},{label:"The plugin does not keep the messages you've deleted"}].map(function(e){return r.createElement(h,{label:e.label,trailing:"id"in e?r.createElement(f,{value:a[e.id]??e.default,onValueChange:function(n){return a[e.id]=n}}):void 0})}))}let s=[];var p={settings:g,onLoad(){try{this.onUnload=l.before("dispatch",d.FluxDispatcher,function(t){const e=t[0];if(e&&e?.type==="MESSAGE_DELETE"){if((!e?.id||!e?.channelId)&&s.includes(e?.id))return s.splice(s.indexOf(e.id),1),t;s.push(e.id);let n=i.storage.message?.trim?.()||"This message was deleted";return i.storage.timestamps&&(n+=` (${d.moment().format(i.storage.ew?"hh:mm:ss.SS a":"HH:mm:ss.SS")})`),t[0]={type:"MESSAGE_EDIT_FAILED_AUTOMOD",messageData:{type:1,message:{channelId:e.channelId,messageId:e.id}},errorResponseBody:{code:2e5,message:n}},t}})}catch(t){alert(`NoDelete died
`+t.stack),console.error(t)}}};return o.default=p,Object.defineProperty(o,"__esModule",{value:!0}),o})({},vendetta.metro.common,vendetta.plugin,vendetta.patcher);
