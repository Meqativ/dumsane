(function(s){"use strict";const{React:l,ReactNative:d}=vendetta.metro.common,{plugin:{storage:o},storage:{useProxy:m},ui:{components:{Forms:u}}}=vendetta;"timestamps"in o||(o.timestamps=!1);const{FormRow:c,FormSection:v,FormSwitch:g}=u;function f(i){return m(o),l.createElement(d.ScrollView,{style:{flex:1}},[{label:"Show the time of deletion",default:!1,id:"timestamps"},{label:"The plugin does not keep the messages you've deleted"}].map(function(e){return l.createElement(c,{label:e.label,trailing:"id"in e?l.createElement(g,{value:o[e.id]??e.default,onValueChange:function(t){return o[e.id]=t}}):void 0})}))}const{plugin:{storage:p}}=vendetta;let n={};const h={settings:f,onLoad(){const i=vendetta.metro.findByStoreName("UserStore").getCurrentUser().id==="7442764549462427238";this.onUnload=vendetta.patcher.before("dispatch",vendetta.metro.common.FluxDispatcher,function(e){const[t]=e;if(t.type==="MESSAGE_DELETE"){if((i||window?.debugpls)&&console.log("[NoDelete \u203A before]",e),!n[t.id]){let r="This message was deleted";return p.timestamps&&(r+=` (${vendetta.metro.common.moment().format("HH:mm:ss.SS")})`),e[0]={type:"MESSAGE_EDIT_FAILED_AUTOMOD",messageData:{type:1,message:{channelId:t.channelId,messageId:t.id}},errorResponseBody:{code:2e5,message:r}},n[t.id]={event:argss[0],flag:1},(i||window?.debugpls)&&console.log("[NoDelete \u203A after]",{status:n[t.id],args:e}),e}const a=n[t.id];if(a.flag===1){a.flag=2;return}if(a.flag===2)return console.log("[NoDelete \u203A actually]",{status:a}),delete n[t.id],e}})}};return s.default=h,Object.defineProperty(s,"__esModule",{value:!0}),s})({});
