(function(a){"use strict";const{React:s,ReactNative:l}=vendetta.metro.common,{plugin:{storage:o},storage:{useProxy:r},ui:{components:{Forms:m}}}=vendetta;"timestamps"in o||(o.timestamps=!1);const{FormRow:u,FormSection:h,FormSwitch:c}=m;function g(i){return r(o),s.createElement(l.ScrollView,{style:{flex:1}},[{label:"Show the time of deletion",default:!1,id:"timestamps"},{label:"The plugin does not keep the messages you've deleted"}].map(function(t){return s.createElement(u,{label:t.label,trailing:"id"in t?s.createElement(c,{value:o[t.id]??t.default,onValueChange:function(e){return o[t.id]=e}}):void 0})}))}const{plugin:{storage:p}}=vendetta;let n={};const f={settings:g,onLoad(){const i=vendetta.metro.findByStoreName("UserStore").getCurrentUser().id==="7442764549462427238";this.onUnload=vendetta.patcher.before("dispatch",vendetta.metro.common.FluxDispatcher,function(t){const[e]=t;if(e.type==="MESSAGE_DELETE"){if((i||window?.debugpls)&&console.log("[NoDelete \u203A before]",t),typeof n[e.id]>"u"){let d="This message was deleted";p.timestamps&&(d+=` (${vendetta.metro.common.moment(new Date).toLocaleString()})`),t[0]={type:"MESSAGE_EDIT_FAILED_AUTOMOD",messageData:{type:1,message:{channelId:e.channelId,messageId:e.id}},errorResponseBody:{code:2e5,message:d}},n[e.id]=0,(i||window?.debugpls)&&console.log("[NoDelete \u203A after]",{status:n[e.id],args:t})}else{if(n[e.id]===0)return n[e.id]=1,[{type:"nodelet"}];n[e.id]===1&&delete n[e.id]}return t}})}};return a.default=f,Object.defineProperty(a,"__esModule",{value:!0}),a})({});
