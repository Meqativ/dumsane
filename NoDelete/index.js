(function(i){"use strict";const{React:d,ReactNative:p}=vendetta.metro.common,{plugin:{storage:s},storage:{useProxy:g},ui:{components:{Forms:b}}}=vendetta;"timestamps"in s||(s.timestamps=!1);const{FormRow:E,FormSection:D,FormSwitch:S}=b;function v(t){return g(s),d.createElement(p.ScrollView,{style:{flex:1}},[{label:"Show the time of deletion",default:!1,id:"timestamps"},{label:"Use AM/PM",default:!1,id:"ew"},{label:"The plugin does not keep the messages you've deleted"}].map(function(e){return d.createElement(E,{label:e.label,trailing:"id"in e?d.createElement(S,{value:s[e.id]??e.default,onValueChange:function(m){return s[e.id]=m}}):void 0})}))}let a=[];const w={settings:v,onLoad(){try{let t=function(y){try{y!=="meow"&&c.unsubscribe(t),r||(r=u());const l=r.id==="744276454946242723";m.onUnload=vendetta.patcher.before("dispatch",vendetta.metro.common.FluxDispatcher,function(o){const f=window?.debugpls===!0||l===!0&&window?.debugpls!==!1,[n]=o;if(n.type==="MESSAGE_DELETE"){if(a.includes(n.id))return delete a[a.indexOf(n.id)],o;a.push(n.id);let h="This message was deleted";return e.timestamps&&(h+=` (${vendetta.metro.common.moment().format(e.ew?"hh:mm:ss.SS a":"HH:mm:ss.SS")})`),f&&console.log("[NoDelete \u203A before]",o),o[0]={type:"MESSAGE_EDIT_FAILED_AUTOMOD",messageData:{type:1,message:{channelId:n.channelId,messageId:n.id}},errorResponseBody:{code:2e5,message:h}},f&&console.log("[NoDelete \u203A after]",o),o}})}catch(l){alert(l.stack),console.error(l)}};const{plugin:{storage:e}}=vendetta,m=this,{FluxDispatcher:c}=vendetta.metro.common,u=vendetta.metro.findByStoreName("UserStore").getCurrentUser;this?.onUnload?.();let r=u();r?this.run("meow"):c.subscribe("CONNECTION_OPEN",t)}catch(t){alert(t.stack),console.error(t)}}};return i.default=w,Object.defineProperty(i,"__esModule",{value:!0}),i})({});
