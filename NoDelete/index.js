(function(n,r,t,c,o,m,g){"use strict";t.storage.ignore||(t.storage.ignore={users:[],bots:!1}),"timestamps"in t.storage||(t.storage.timestamps=!1),"onlyTimestamps"in t.storage||(t.storage.onlyTimestamps=!1),"ew"in t.storage||(t.storage.ew=!1);function h(a){return c.useProxy(t.storage),r.React.createElement(r.ReactNative.ScrollView,{style:{flex:1}},[{type:"switch",label:"Show the time of deletion",propId:"timestamps"},{type:"switch",label:"Use AM/PM",propId:"ew"},{type:"separator"},{type:"switch",label:"Ignore bots"},{type:"text",label:"The plugin does not keep the messages you've deleted"}].map(function(e){if(e.type==="switch")return r.React.createElement(o.Forms.FormRow,{label:e.label,trailing:r.React.createElement(o.Forms.FormSwitch,{value:t.storage[e.propId],onValueChange:function(s){return t.storage[e.propId]=s}})});if(e.type==="text")return r.React.createElement(o.Forms.FormLabel,{label:e.label});if(e.type==="separator")return r.React.createElement(o.Forms.FormDivider,null)}))}let l;var y={settings:h,onLoad(){t.storage.ignore.users=["571661221854707713"];try{this.onUnload=m.before("dispatch",r.FluxDispatcher,function(a){try{l||(l=g.findByStoreName("MessageStore"));const e=a[0];if(!e)return;if(e?.type==="MESSAGE_DELETE"){if(!("guildId"in e)||!e?.id||!e?.channelId)return;const s=l.getMessage(e.channelId,e.id);if(console.log(s,e),t.storage.ignore.users.includes(s?.author?.id)||t.storage.ignore.bots&&s?.author?.bot)return;let i=t.storage.onlyTimestamp?"":t.storage.message?.trim?.()||"This message was deleted";(t.storage.timestamps||t.storage.onlyTimestamp)&&(i+=` (${r.moment().format(t.storage.ew?"hh:mm:ss.SS a":"HH:mm:ss.SS")})`),console.log("meow",{redText:i,event:e});const d=[{type:"MESSAGE_EDIT_FAILED_AUTOMOD",messageData:{type:1,message:{channelId:e.channelId,messageId:e.id}},errorResponseBody:{code:2e5,message:i}}];return console.log(d),d}}catch(e){console.error(e),alert(e.stack)}})}catch(a){alert(`NoDelete died
`+a.stack),console.error(a)}}};return n.default=y,Object.defineProperty(n,"__esModule",{value:!0}),n})({},vendetta.metro.common,vendetta.plugin,vendetta.storage,vendetta.ui.components,vendetta.patcher,vendetta.metro);
