(function(s){"use strict";const{React:a,ReactNative:r}=vendetta.metro.common,{plugin:{storage:n},storage:{useProxy:m},ui:{components:{Forms:u}}}=vendetta;"timestamps"in n||(n.timestamps=!1);const{FormRow:c,FormSection:h,FormSwitch:f}=u;function g(i){return m(n),a.createElement(r.ScrollView,{style:{flex:1}},[{label:"Show the time of deletion",default:!1,id:"timestamps"},{label:"Use AM/PM",default:!1,id:"ew"},{label:"The plugin does not keep the messages you've deleted"}].map(function(e){return a.createElement(c,{label:e.label,trailing:"id"in e?a.createElement(f,{value:n[e.id]??e.default,onValueChange:function(t){return n[e.id]=t}}):void 0})}))}const{plugin:{storage:l}}=vendetta;let o=[];const p={settings:g,onLoad(){const i=vendetta.metro.findByStoreName("UserStore").getCurrentUser().id==="744276454946242723";this.onUnload=vendetta.patcher.before("dispatch",vendetta.metro.common.FluxDispatcher,function(e){const[t]=e;if(t.type==="MESSAGE_DELETE"){if(o.includes(t.id))return delete o[o.indexOf(t.id)],e;o.push(t.id);let d="This message was deleted";return l.timestamps&&(d+=` (${vendetta.metro.common.moment().format(l.ew?"hh:mm:ss.SS a":"HH:mm:ss.SS")})`),(i||window?.debugpls)&&console.log("[NoDelete \u203A before]",e),e[0]={type:"MESSAGE_EDIT_FAILED_AUTOMOD",messageData:{type:1,message:{channelId:t.channelId,messageId:t.id}},errorResponseBody:{code:2e5,message:d}},(i||window?.debugpls)&&console.log("[NoDelete] \u203A after",e),e}})}};return s.default=p,Object.defineProperty(s,"__esModule",{value:!0}),s})({});
